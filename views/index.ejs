<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Fast Upload</title>
</head>
<body>
  <!-- Put the button outside the form to avoid redirect or reload -->
  <form enctype="multipart/form-data">
    <input name="file" type="file">
    <button>Upload</button>
  </form>
  <div></div>
  <script type="text/javascript">
  var qq;
  var form = document.getElementsByTagName('form')[0];
  document.getElementsByTagName("button")[0].onclick = function(event) {
    event.preventDefault();
    var formData = new FormData(form);
    var fileInput = document.getElementsByTagName('input')[0];

    var xhr = new XMLHttpRequest();
    xhr.open('post', 'upload', true);
    xhr.send(formData);
    xhr.upload.onprogress = function(e){
      if (e.lengthComputable) {
        var complete = (e.loaded / e.total * 100 | 0);
        if(100==complete){
            complete=99.9;
        }
        // up_progress.innerHTML = complete + ' %';
      }
    };
    xhr.onreadystatechange = function(){
      if (xhr.readyState==4 && xhr.status==200) {
        document.getElementsByTagName("div")[0].innerHTML=xhr.responseText;    
        console.log(xhr.responseText)
        
      }
    };
    qq=xhr;
    return false; // To avoid actual submission of the form
  }
  </script>

</body>